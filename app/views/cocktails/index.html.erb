<div class="placeholder">
  <h1 class="ml6">
    <span class="text-wrapper">
      <a class="data-scroll title" href="#cocktails"><span class="letters">Cocktails</span></a>
    </span>
  </h1>
</div>

<div class="container svg">
  <svg aria-hidden="true" data-prefix="fas" data-icon="cocktail" class="svg-inline--fa fa-cocktail fa-w-18" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" width="50%"
     height="50%">
    <path fill="currentColor" stroke-width="10" d="M296 464h-56V338.78l168.74-168.73c15.52-15.52 4.53-42.05-17.42-42.05H24.68c-21.95 0-32.94 26.53-17.42 42.05L176 338.78V464h-56c-22.09 0-40 17.91-40 40 0 4.42 3.58 8 8 8h240c4.42 0 8-3.58 8-8 0-22.09-17.91-40-40-40zM432 0c-62.61 0-115.35 40.2-135.18 96h52.54c16.65-28.55 47.27-48 82.64-48 52.93 0 96 43.06 96 96s-43.07 96-96 96c-14.04 0-27.29-3.2-39.32-8.64l-35.26 35.26C379.23 279.92 404.59 288 432 288c79.53 0 144-64.47 144-144S511.53 0 432 0z">
    </path>
  </svg>
</div>

<div class="container mt-3" id="cocktails">
  <div class="row scroll">
    <% @cocktails.each do |cocktail| %>
      <div class="col-4 col-xs-12 col-sm-6 col-md-4">
        <%= link_to cocktail_path(cocktail) do %>
          <div class="flat-card" style="background-image: url('<%= cocktail.image_url %>')">
            <div class="flat-card-image" style="background-image: url('<%= cocktail.image_url %>')"></div>
            <div class="flat-card-content">
              <div class="flat-card-title">
                <h4><%= cocktail.name %></h4>
              </div>
              <div class="flex">
                <div class="flex">
                  <% total = 0 %>
                  <% average_rating = 0 %>
                  <% unless cocktail.reviews.nil? %>
                    <% cocktail.reviews.each do |review| %>
                      <% total += review.rating %>
                    <% end %>
                  <% end %>
                  <% average_rating = total / cocktail.reviews.count unless cocktail.reviews.count.zero? %>
                  <span>
                  <% average_rating.times do %>
                    <i class="fas fa-star"></i>
                  <% end %>
                  <% (5 - average_rating).times do %>
                    <i class="far fa-star"></i>
                  <% end %>
                  </span>
                </div>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
</div>
